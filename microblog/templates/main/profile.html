{% extends 'base.html' %}
{% block content %}
    <section class ="profile">
    <h1>{{ user.name }} 's Profile</h1>

    <div class="profile-card">
        <dl class="readonly">
            <div><dt>My User-ID</dt><dd>{{ user.id }}</dd></div>
            <div><dt>Email Address</dt><dd>{{ user.email}}</dd></div>
            <div><dt>Name</dt><dd>{{ user.name }}</dd></div>
            <div><dt>About me:</dt><dd>{{ user.description }}</dd></div>
        </dl>
    </div>
   <h2>Edit your details</h2>
   {% if has_editing_permissions %}
  <form class="profile-form"
        action="{{ url_for('main.edit_user', user_id=user.id) }}"
        method="post" novalidate>
    <label>
      Email
      <input type="email" name="email" value="{{ user.email }}" required>
    </label>

    <label>
      Name
      <input type="text" name="name" value="{{ user.name }}" maxlength="64" required>
    </label>

    <label>
      Description
      <textarea name="description" rows="3" maxlength="512"
                placeholder="Tell others about you">{{ user.description or "" }}</textarea>
    </label>

    <fieldset>
      <legend>Change password (optional)</legend>
      <input type="password" name="password" placeholder="New password">
      <input type="password" name="password2" placeholder="Confirm new password">
    </fieldset>

    <button class="btn btn--primary" type="submit">Save changes</button>
  </form>

  <h2>Posts published by {{ user.name }}</h2>
  <ul class="post-list">
    {% for p in user.posts %}
      <li>
        <a href="{{ url_for('main.user_profile', user_id=p.user.id) }}">{{ p.user.name }}</a>:
        {{ p.text }} <small>Â· {{ p.timestamp.strftime('%Y-%m-%d %H:%M') }}</small>
      </li>
    {% else %}
      <li>No posts yet.</li>
    {% endfor %}
  </ul>
</section>
{% endblock %}